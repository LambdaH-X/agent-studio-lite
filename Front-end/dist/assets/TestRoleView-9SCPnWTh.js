import{_ as g}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{l as k,h as w,c as R,o as p,b as t,d as l,w as s,e as d,f as o,t as b,i as c,E as f}from"./index-CXVfb7lr.js";const x={class:"test-role-container"},C={class:"role-display"},T={class:"action-buttons"},V={class:"test-links"},B={__name:"TestRoleView",setup(I){const n=k(()=>localStorage.getItem("userRole")||"user"),m=r=>{localStorage.setItem("userRole",r),f.success(`已设置为${r==="admin"?"管理员":"普通用户"}角色，即将刷新页面...`),setTimeout(()=>{window.location.reload()},1e3)},v=()=>{localStorage.removeItem("userRole"),f.success("已清除角色信息，即将刷新页面..."),setTimeout(()=>{window.location.reload()},1e3)};return w(()=>{console.log("当前角色:",n.value)}),(r,e)=>{const _=d("el-tag"),a=d("el-card"),i=d("el-button"),u=d("el-link");return p(),R("div",x,[e[13]||(e[13]=t("h1",null,"角色测试工具",-1)),l(a,{class:"role-card"},{header:s(()=>[...e[2]||(e[2]=[t("div",{class:"card-header"},[t("span",null,"当前用户角色")],-1)])]),default:s(()=>[t("div",C,[l(_,{type:n.value==="admin"?"success":"info"},{default:s(()=>[o(b(n.value==="admin"?"管理员":"普通用户"),1)]),_:1},8,["type"])])]),_:1}),l(a,{class:"action-card"},{header:s(()=>[...e[3]||(e[3]=[t("div",{class:"card-header"},[t("span",null,"切换用户角色")],-1)])]),default:s(()=>[t("div",T,[l(i,{type:"primary",onClick:e[0]||(e[0]=y=>m("admin"))},{default:s(()=>[...e[4]||(e[4]=[o("设置为管理员",-1)])]),_:1}),l(i,{type:"info",onClick:e[1]||(e[1]=y=>m("user"))},{default:s(()=>[...e[5]||(e[5]=[o("设置为普通用户",-1)])]),_:1}),l(i,{type:"warning",onClick:v},{default:s(()=>[...e[6]||(e[6]=[o("清除角色信息",-1)])]),_:1})])]),_:1}),l(a,{class:"test-card"},{header:s(()=>[...e[7]||(e[7]=[t("div",{class:"card-header"},[t("span",null,"功能测试")],-1)])]),default:s(()=>[t("div",V,[l(u,{type:"primary",href:"/home"},{default:s(()=>[...e[8]||(e[8]=[o("前往首页（检查侧边栏）",-1)])]),_:1}),n.value==="admin"?(p(),c(u,{key:0,type:"success",href:"/admin"},{default:s(()=>[...e[9]||(e[9]=[o("前往用户管理（管理员页面）",-1)])]),_:1})):(p(),c(u,{key:1,type:"danger",href:"/admin"},{default:s(()=>[...e[10]||(e[10]=[o("尝试访问用户管理（应显示403）",-1)])]),_:1}))])]),_:1}),l(a,{class:"instructions-card"},{header:s(()=>[...e[11]||(e[11]=[t("div",{class:"card-header"},[t("span",null,"测试说明")],-1)])]),default:s(()=>[e[12]||(e[12]=t("div",{class:"instructions"},[t("h3",null,"测试步骤："),t("ol",null,[t("li",null,'先设置为普通用户，访问首页，确认侧边栏不显示"用户管理"'),t("li",null,"尝试访问/admin页面，应被重定向到403权限不足页面"),t("li",null,'设置为管理员，刷新页面，确认侧边栏显示"用户管理"'),t("li",null,"访问/admin页面，应能正常访问")]),t("p",{class:"note"},"注意：切换角色后需要刷新页面才能完全生效")],-1))]),_:1})])}}},N=g(B,[["__scopeId","data-v-d2b8166b"]]);export{N as default};
